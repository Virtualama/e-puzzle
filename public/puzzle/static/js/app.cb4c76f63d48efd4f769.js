webpackJsonp([1],[,,,,,,,,,,,,function(t,e,i){i(42);var n=i(4)(i(33),i(50),null,null);t.exports=n.exports},,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(13),r=i(12),s=i.n(r);n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",components:{App:s.a}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(46),r=i.n(n),s=i(36),o=i.n(s);e.default={name:"app",components:{Board:r.a},created:function(){this.autostart()},computed:{viewportHeight:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},viewportWidth:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},methods:{autostart:function(){var t=this;o()("static/fingers.jpg",function(e){t.start({image:e.toDataURL(),size:{horizontal:3,vertical:3}})},{minWidth:this.viewportWidth,maxWidth:this.viewportWidth,minHeight:this.viewportHeight,maxHeight:this.viewportHeight,canvas:!0})},start:function(){var t;(t=this.$refs.board).start.apply(t,arguments)}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(44),r=i.n(n),s=i(47),o=i.n(s),l=i(14),a=i.n(l);e.default={components:{Tile:o.a},data:function(){return{image:null,size:{horizontal:0,vertical:0},tiles:[],tileSize:{width:0,height:0}}},watch:{locked:function(t,e){!t&&e&&this.shuffleTiles()}},computed:{viewportHeight:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},viewportWidth:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},locked:function(){return this.tiles.some(function(t){return t.isLocked})},frameSize:function(){return{width:this.tileSize.width*this.size.horizontal+"px",height:this.tileSize.height*this.size.vertical+"px"}},totalTiles:function(){return this.size.horizontal*this.size.vertical},solved:function(){if(!this.tiles.length)return!1;if(this.locked)return!1;for(var t=0;t<this.totalTiles;++t)if(this.tiles[t].styles.order!==this.tiles[t].position)return!1;return!0}},methods:{start:function(t){var e=this,i=t.image,n=t.size;this.size=n,this.image=i;var r=new Image;r.onload=function(){e.tileSize.width=Math.floor(e.viewportHeight/n.horizontal),e.tileSize.height=Math.floor(e.viewportWidth/n.vertical),e.generateTiles()},r.src=i},generateTiles:function(){var t=this;this.tiles=[],a.a.get("/api/captures").then(function(e){for(var i=e.data.list.map(function(t){return Number(t.tile)}),n=0;n<t.totalTiles;++n)t.tiles.push({styles:{background:0===n?"transparent":"url("+t.image+")",backgroundPositionX:"-"+n%t.size.horizontal*t.tileSize.width+"px",backgroundPositionY:"-"+Math.floor(n/t.size.horizontal)*t.tileSize.height+"px",width:t.tileSize.width+"px",height:t.tileSize.height+"px",order:n},position:n,isEmpty:0===n,isLocked:!i.includes(n)^0===n})})},shuffleTiles:function(){for(var t=this,e=0,i=5*this.totalTiles;e<i;++e)!function(e,i){var n=t.tiles.find(function(t){return t.isEmpty}),s=t.tiles.filter(function(e){return t.getAdjacentOrders(n).includes(e.styles.order)});t.switchTiles(n,r()(s))}()},unlock:function(t){var e=new URLSearchParams;e.append("user","luis"),e.append("tile",t.position),e.append("image","otter"),a.a.post("/api/captures",e).then(function(e){console.log(e),t.isLocked=!1})},clickedTile:function(t){var e=this;if(!t.isEmpty){if(t.isLocked)return void this.unlock(t);if(!this.locked){var i=this.tiles.find(function(i){return i.isEmpty&&e.getAdjacentOrders(t).indexOf(i.styles.order)>-1});i&&this.switchTiles(i,t)}}},switchTiles:function(t,e){var i=[e.styles.order,t.styles.order];t.styles.order=i[0],e.styles.order=i[1]},getAdjacentOrders:function(t){var e=t.styles.order;return[e%this.size.horizontal?e-1:null,(e+1)%this.size.horizontal?e+1:null,e-this.size.horizontal,e+this.size.horizontal]}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["tile"],methods:{onTileClick:function(){this.$emit("clicked",this.tile)}}}},,,,,function(t,e){},function(t,e){},function(t,e){},,,,function(t,e,i){i(41);var n=i(4)(i(34),i(49),null,null);t.exports=n.exports},function(t,e,i){i(40);var n=i(4)(i(35),i(48),null,null);t.exports=n.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"tile",class:{empty:t.tile.isEmpty,locked:t.tile.isLocked},style:t.tile.styles,on:{click:t.onTileClick}})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"board"},[i("div",{staticClass:"frame-wrapper",style:t.frameSize},[t.solved?i("p",{staticClass:"win"},[t._v("You Win!")]):t._e(),t._v(" "),i("div",{staticClass:"frame",style:t.frameSize},t._l(t.tiles,function(e){return i("Tile",{key:e.position,ref:"tiles",refInFor:!0,attrs:{tile:e},on:{clicked:t.clickedTile}})}))])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Board",{ref:"board"})],1)},staticRenderFns:[]}}],[32]);
//# sourceMappingURL=app.cb4c76f63d48efd4f769.js.map